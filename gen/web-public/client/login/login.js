// Generated by CoffeeScript 1.9.1
(function() {
  this.LoginController = function($scope, $ocModal, $http, $modalInstance, $injector) {
    setTimeout(function() {
      return $('#username').focus();
    }, 100);
    $scope.login = function() {
      $http = $injector.invoke(function($http) {
        return $http;
      });
      return $http.post('rest/login', {
        username: this.username,
        password: this.password
      }).error(function(data, status, headers, config) {
        return $scope.error = data;
      }).success(function(data, status, headers, config) {
        if (data.error) {
          return $scope.error = data.error;
        } else {
          return $modalInstance.close('OK');
        }
      });
    };
    return $scope.passwordReset = function() {
      $ocModal.close();
      return $ocModal.open({
        id: 'modal2',
        url: 'password-reset/password-reset.html',
        controller: 'PasswordResetController'
      });
    };
  };

  this.LoginController.$inject = ['$scope', '$ocModal', '$http', '$modalInstance', '$injector'];

}).call(this);
